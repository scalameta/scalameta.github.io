<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>SemanticDB Guide · Scalameta</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="SemanticDB is a data model for semantic information such as symbols and types"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="SemanticDB Guide · Scalameta"/><meta property="og:type" content="website"/><meta property="og:url" content="https://scalameta.org/index.html"/><meta property="og:description" content="SemanticDB is a data model for semantic information such as symbols and types"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css"/><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/scalameta.png" alt="Scalameta"/><h2 class="headerTitleWithLogo">Scalameta</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/trees/guide.html" target="_self">Trees</a></li><li class="siteNavGroupActive siteNavItemActive"><a href="/docs/semanticdb/guide.html" target="_self">SemanticDB</a></li><li class=""><a href="https://github.com/scalameta/scalameta" target="_blank">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>SemanticDB</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Trees</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/trees/guide.html">Guide</a></li><li class="navListItem"><a class="navItem" href="/docs/trees/quasiquotes.html">trees/quasiquotes</a></li><li class="navListItem"><a class="navItem" href="/docs/trees/examples.html">trees/examples</a></li><li class="navListItem"><a class="navItem" href="/docs/trees/scalafiddle.html">ScalaFiddle Playground</a></li><li class="navListItem"><a class="navItem" href="/docs/trees/astexplorer.html">AST Explorer</a></li><li class="navListItem"><a class="navItem" href="/docs/trees/scaladoc.html">Scaladoc</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">SemanticDB</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/docs/semanticdb/guide.html">Guide</a></li><li class="navListItem"><a class="navItem" href="/docs/semanticdb/specification.html">Specification</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Community</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/misc/built-with-scalameta.html">Built with Scalameta</a></li><li class="navListItem"><a class="navItem" href="/docs/misc/presentations.html">Presentations</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">SemanticDB Guide</h1></header><article><div><span><p>SemanticDB is a data model for semantic information such as symbols and types
about programs in Scala and other languages. SemanticDB decouples production and
consumption of semantic information, establishing documented means for
communication between tools.</p>
<p>In this document, we introduce practical aspects of working with SemanticDB. We
describe the tools that can be used to produce SemanticDB payloads, the tools
can be used to consume SemanticDB payloads and useful tips &amp; tricks for working
with SemanticDB. If you're looking for a comprehensive reference of SemanticDB
features, check out <a href="specification.html">the specification</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="installation"></a><a href="#installation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h2>
<p>This guide covers several non-standard command-line tools: <code>metac</code> and <code>metap</code>.
First, install the <code>coursier</code> command-line tool by following the
<a href="https://get-coursier.io/docs/cli-installation">instructions here</a>. Next, use
coursier to install metac and metap.</p>
<p><a href="https://maven-badges.herokuapp.com/maven-central/org.scalameta/scalameta_2.12"><img src="https://maven-badges.herokuapp.com/maven-central/org.scalameta/scalameta_2.12/badge.svg" alt="Maven Central"></a></p>
<pre><code class="hljs">cs <span class="hljs-keyword">install</span> metac metap
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h2>
<p>Let's generate SemanticDB for a simple Scala program. (At the moment, our
SemanticDB producers provide full Scala support and partial Java support.
Theoretically,
<a href="https://github.com/scalameta/scalameta/blob/main/semanticdb/semanticdb/semanticdb.proto">the SemanticDB protobuf schema</a>
can accommodate other languages as well, but we haven't attempted to do that
yet).</p>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Test</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    println(<span class="hljs-string">"hello world"</span>)
  }
}
</code></pre>
<p>In order to obtain a SemanticDB corresponding to this program, let's use the
Metac command-line tool. For more information on other tools that can produce
SemanticDB, <a href="#producing-semanticdb">see below</a>.</p>
<pre><code class="hljs css language-sh">metac Test.scala
</code></pre>
<p><code>metac</code> is a thin wrapper over the Scala compiler. It supports the same
command-line arguments as <code>scalac</code> supports, but instead of generating .class
files it generates .semanticdb files.</p>
<pre><code class="hljs">$ tree
.
├── <span class="hljs-keyword">META</span>-<span class="hljs-keyword">INF</span>
│   └── semanticdb
│       └── <span class="hljs-keyword">Test</span>.<span class="hljs-keyword">scala</span>.semanticdb
└── <span class="hljs-keyword">Test</span>.<span class="hljs-keyword">scala</span>
</code></pre>
<p>If we take a look inside Test.scala.semanticdb, we'll see a weird mix of
legible-looking text and special characters. That's because .semanticdb files
store protobuf payloads.</p>
<pre><code class="hljs"><span class="hljs-string">$</span> <span class="hljs-string">xxd</span> <span class="hljs-string">META-INF/semanticdb/Test.scala.semanticdb</span>
<span class="hljs-attr">00000000:</span> <span class="hljs-string">0aaa</span> <span class="hljs-number">0408</span> <span class="hljs-number">0412</span> <span class="hljs-string">0a54</span> <span class="hljs-number">6573</span> <span class="hljs-string">742e</span> <span class="hljs-number">7363</span> <span class="hljs-string">616c</span>  <span class="hljs-string">.......Test.scal</span>
<span class="hljs-attr">00000010:</span> <span class="hljs-string">612a</span> <span class="hljs-string">580a</span> <span class="hljs-string">1a5f</span> <span class="hljs-string">656d</span> <span class="hljs-number">7074</span> <span class="hljs-string">795f</span> <span class="hljs-string">2f54</span> <span class="hljs-number">6573</span>  <span class="hljs-string">a*X.._empty_/Tes</span>
<span class="hljs-attr">00000020:</span> <span class="hljs-string">742e</span> <span class="hljs-string">6d61</span> <span class="hljs-string">696e</span> <span class="hljs-number">2829</span> <span class="hljs-number">2e28</span> <span class="hljs-number">6172</span> <span class="hljs-number">6773</span> <span class="hljs-number">2918</span>  <span class="hljs-string">t.main().(args).</span>
<span class="hljs-attr">00000030:</span> <span class="hljs-string">082a</span> <span class="hljs-number">0461</span> <span class="hljs-number">7267</span> <span class="hljs-number">7380</span> <span class="hljs-number">0101</span> <span class="hljs-string">8a01</span> <span class="hljs-number">2e22</span> <span class="hljs-string">2c0a</span>  <span class="hljs-string">.*.args......",.</span>
<span class="hljs-attr">00000040:</span> <span class="hljs-string">2a12</span> <span class="hljs-number">2812</span> <span class="hljs-string">0c73</span> <span class="hljs-number">6361</span> <span class="hljs-string">6c61</span> <span class="hljs-string">2f41</span> <span class="hljs-number">7272</span> <span class="hljs-number">6179</span>  <span class="hljs-string">*.(..scala/Array</span>
<span class="hljs-attr">00000050:</span> <span class="hljs-string">231a</span> <span class="hljs-number">1812</span> <span class="hljs-number">1612</span> <span class="hljs-number">1473</span> <span class="hljs-number">6361</span> <span class="hljs-string">6c61</span> <span class="hljs-string">2f50</span> <span class="hljs-number">7265</span>  <span class="hljs-comment">#......scala/Pre</span>
<span class="hljs-attr">00000060:</span> <span class="hljs-number">6465</span> <span class="hljs-string">662e</span> <span class="hljs-number">5374</span> <span class="hljs-number">7269</span> <span class="hljs-number">6e67</span> <span class="hljs-string">232a</span> <span class="hljs-string">530a</span> <span class="hljs-string">0d5f</span>  <span class="hljs-string">def.String#*S.._</span>
<span class="hljs-attr">00000070:</span> <span class="hljs-string">656d</span> <span class="hljs-number">7074</span> <span class="hljs-string">795f</span> <span class="hljs-string">2f54</span> <span class="hljs-number">6573</span> <span class="hljs-string">742e</span> <span class="hljs-string">180a</span> <span class="hljs-number">2008</span>  <span class="hljs-string">empty_/Test...</span> <span class="hljs-string">.</span>
<span class="hljs-attr">00000080:</span> <span class="hljs-string">2a04</span> <span class="hljs-number">5465</span> <span class="hljs-number">7374</span> <span class="hljs-number">8001</span> <span class="hljs-string">018a</span> <span class="hljs-string">012f</span> <span class="hljs-string">0a2d</span> <span class="hljs-string">0a00</span>  <span class="hljs-string">*.Test...../.-..</span>
<span class="hljs-attr">00000090:</span> <span class="hljs-number">1211</span> <span class="hljs-string">120f</span> <span class="hljs-string">120d</span> <span class="hljs-number">7363</span> <span class="hljs-string">616c</span> <span class="hljs-string">612f</span> <span class="hljs-string">416e</span> <span class="hljs-number">7952</span>  <span class="hljs-string">......scala/AnyR</span>
<span class="hljs-attr">000000a0:</span> <span class="hljs-number">6566</span> <span class="hljs-number">2322</span> <span class="hljs-string">160a</span> <span class="hljs-string">145f</span> <span class="hljs-string">656d</span> <span class="hljs-number">7074</span> <span class="hljs-string">795f</span> <span class="hljs-string">2f54</span>  <span class="hljs-string">ef#"..._empty_/T</span>
<span class="hljs-attr">000000b0:</span> <span class="hljs-number">6573</span> <span class="hljs-string">742e</span> <span class="hljs-string">6d61</span> <span class="hljs-string">696e</span> <span class="hljs-number">2829</span> <span class="hljs-number">2e92</span> <span class="hljs-number">0102</span> <span class="hljs-string">3a00</span>  <span class="hljs-string">est.main()....:.</span>
<span class="hljs-attr">000000c0:</span> <span class="hljs-string">2a5c</span> <span class="hljs-string">0a14</span> <span class="hljs-string">5f65</span> <span class="hljs-string">6d70</span> <span class="hljs-number">7479</span> <span class="hljs-string">5f2f</span> <span class="hljs-number">5465</span> <span class="hljs-number">7374</span>  <span class="hljs-string">*\.._empty_/Test</span>
<span class="hljs-string">...</span>
</code></pre>
<p>In order to make sense of .semanticdb files, we can use the Metap command-line
tool. For more information on other tools that can consume SemanticDB,
<a href="#consuming-semanticdb">see below</a>.</p>
<pre><code class="hljs">$ metap .
Test.scala
----------

Summary:
Schema =&gt; SemanticDB v4
Uri =&gt; Test.scala
Text =&gt; empty
Language =&gt; Scala
Symbols =&gt; <span class="hljs-number">3</span> entries
Occurrences =&gt; <span class="hljs-number">7</span> entries

Symbols:
_empty_/Test. =&gt; <span class="hljs-keyword">final</span> object Test extends AnyRef { +<span class="hljs-number">1</span> decls }
_empty_/Test.main(). =&gt; method main(args: Array[String]): Unit
_empty_/Test.main().(args) =&gt; param args: Array[String]

Occurrences:
[<span class="hljs-number">0</span>:<span class="hljs-number">7.</span><span class="hljs-number">.0</span>:<span class="hljs-number">11</span>) &lt;= _empty_/Test.
[<span class="hljs-number">1</span>:<span class="hljs-number">6.</span><span class="hljs-number">.1</span>:<span class="hljs-number">10</span>) &lt;= _empty_/Test.main().
[<span class="hljs-number">1</span>:<span class="hljs-number">11.</span><span class="hljs-number">.1</span>:<span class="hljs-number">15</span>) &lt;= _empty_/Test.main().(args)
[<span class="hljs-number">1</span>:<span class="hljs-number">17.</span><span class="hljs-number">.1</span>:<span class="hljs-number">22</span>) =&gt; scala/Array#
[<span class="hljs-number">1</span>:<span class="hljs-number">23.</span><span class="hljs-number">.1</span>:<span class="hljs-number">29</span>) =&gt; scala/Predef.String#
[<span class="hljs-number">1</span>:<span class="hljs-number">33.</span><span class="hljs-number">.1</span>:<span class="hljs-number">37</span>) =&gt; scala/Unit#
[<span class="hljs-number">2</span>:<span class="hljs-number">4.</span><span class="hljs-number">.2</span>:<span class="hljs-number">11</span>) =&gt; scala/Predef.println(+<span class="hljs-number">1</span>).
</code></pre>
<p>Metap prettyprints various parts of the SemanticDB payload in correspondence
with <a href="specification.html">the SemanticDB specification</a>. Here are the most
important parts:</p>
<ul>
<li><p><code>Uri</code> stores the URI of the source file relative to the directory where the
SemanticDB producer was invoked.</p></li>
<li><p><code>Symbols</code> contains information about definitions in the source file, including
modifiers, signatures, etc.</p>
<p>For example,
<code>_empty_/Test.main(). =&gt; method main: (args: Array[String]): Unit</code> says that
<code>main</code> is a method with one parameter of type <code>Array[String]</code>.</p></li>
<li><p><code>Occurrences</code> contains a list of identifiers from the source file with their
line/column-based positions and unique identifiers pointing to corresponding
definitions resolved by the compiler.</p>
<p>For example, <code>[2:4..2:11): println =&gt; scala/Predef.println(+1).</code> says that the
identifier <code>println</code> on line 3 (zero-based numbering scheme!) refers to the
second overload of <code>println</code> from <code>scala/Predef</code>.</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="what-is-semanticdb-good-for"></a><a href="#what-is-semanticdb-good-for" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is SemanticDB good for?</h2>
<p>SemanticDB decouples producers and consumers of semantic information about
programs and establishes <a href="specification.html">a rigorous specification</a> of the
interchange format.</p>
<p>Thanks to that, SemanticDB-based tools like <a href="#scalafix">Scalafix</a>,
<a href="#metadoc">Metadoc</a> and <a href="#metals">Metals</a> don't need to know about compiler
internals and can work with any compiler that supports SemanticDB. This
demonstrably improves developer experience, portability and scalability.
Next-generation semantic tools at Twitter are based on SemanticDB.</p>
<p>For more information about the SemanticDB vision, check out our talks:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=4yqDFsdKciA">Semantic Tooling at Twitter</a>
(June 2017) by Eugene Burmako &amp; Stu Hood.</li>
<li><a href="https://t.co/Z080F6JxyQ?amp=1">SemanticDB for Scala developer tools</a>
(April 2018) by Ólafur Páll Geirsson.</li>
<li><a href="https://na.scaladays.org/schedule/how-we-built-tools-that-scale-to-millions-of-lines-of-code">How We Built Tools That Scale to Millions of Lines of Code</a>
(June 2018) by Eugene Burmako.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="producing-semanticdb"></a><a href="#producing-semanticdb" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Producing SemanticDB</h2>
<h3><a class="anchor" aria-hidden="true" id="scalac-compiler-plugin"></a><a href="#scalac-compiler-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scalac compiler plugin</h3>
<p>The <code>semanticdb-scalac</code> compiler plugin injects itself immediately after the
<code>typer</code> phase of the Scala compiler and then harvests and dumps semantic
information from Scalac in SemanticDB format.</p>
<pre><code class="hljs">scalac <span class="hljs-params">-Xplugin</span>:path/<span class="hljs-keyword">to</span>.jar <span class="hljs-params">-Yrangepos</span> <span class="hljs-meta">[</span>&lt;pluginOption&gt; <span class="hljs-params">...</span><span class="hljs-meta">]</span> <span class="hljs-meta">[</span>&lt;scalacOption&gt; <span class="hljs-params">...</span><span class="hljs-meta">]</span> <span class="hljs-meta">[</span>&lt;sourceFile&gt; <span class="hljs-params">...</span><span class="hljs-meta">]</span>
</code></pre>
<p>The compiler plugin supports the following options that can be passed through
Scalac in the form of <code>-P:semanticdb:&lt;option&gt;:&lt;value&gt;</code></p>
<table>
  <tr>
    <td width="310px">Option</td>
    <td>Value</td>
    <td>Explanation</td>
    <td>Default</td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:failures:&lt;value&gt;</code></td>
    <td>
      <code>error</code>,<br/>
      <code>warning</code>,<br/>
      <code>info</code>,<br/>
      <code>ignore</code></td>
    <td>
      The level at which the Scala compiler should report crashes that may
      happen during SemanticDB generation.
    </td>
    <td><code>warning</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:profiling:&lt;value&gt;</code></td>
    <td>
      <code>on</code>,<br/>
      <code>off</code><br/>
    </td>
    <td>
      Controls basic profiling functionality that computes the overhead of
      SemanticDB generation relative to regular compilation time
      (<code>on</code> for dumping profiling information to console,
      <code>off</code> for disabling profiling).
    </td>
    <td><code>off</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:include:&lt;value&gt;</code></td>
    <td>Java regex</td>
    <td>Which source files to include in SemanticDB generation?</td>
    <td><code>.*</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:exclude:&lt;value&gt;</code></td>
    <td>Java regex</td>
    <td>Which source files to exclude from SemanticDB generation?</td>
    <td><code>^$</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:sourceroot:&lt;value&gt;</code></td>
    <td>Absolute or relative path</td>
    <td>
      Used to relativize source file paths into
      <code>TextDocument.uri</code>.
    </td>
    <td>Current working directory</td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:targetroot:&lt;value&gt;</code></td>
    <td>Absolute or relative path</td>
    <td>
      The output directory to produce <code>META-INF/semanticdb/**/*.semanticdb</code>
      files.
    </td>
    <td>
      The compiler output directory, matches the sbt setting key <code>classDirectory</code>
      and scalac command-line option <code>-d</code>.
    </td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:text:&lt;value&gt;</code></td>
    <td>
        <code>on</code>,<br/>
        <code>off</code>
    </td>
    <td>
      Specifies whether to save source code in
      <code>TextDocument.text</code> (<code>on</code> for yes,
      <code>off</code> for no).
    </td>
    <td><code>off</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:md5:&lt;value&gt;</code></td>
    <td>
        <code>on</code>,<br/>
        <code>off</code>
    </td>
    <td>
      Specifies whether to save a hexadecimal formatted MD5 fingerprint of the source
      file contents in <code>TextDocument.md5</code> (<code>on</code> for yes,
      <code>off</code> for no).
    </td>
    <td><code>on</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:symbols:&lt;value&gt;</code></td>
    <td>
        <code>all</code>,<br/>
        <code>local-only</code>,<br/>
        <code>none</code>
    </td>
    <td>
      Specifies which symbol informations to save in
      <code>TextDocument.symbols</code> (<code>all</code> for both local and global symbols,
      <code>local-only</code> for only local symbols and
      <code>none</code> for no symbols).
    </td>
    <td><code>all</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:diagnostics:&lt;value&gt;</code></td>
    <td>
        <code>on</code>,<br/>
        <code>off</code>
    </td>
    <td>
      Specifies whether to save compiler messages in
      <code>TextDocument.diagnostics</code> (<code>on</code> for yes,
      <code>off</code> for no).
    </td>
    <td><code>on</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:synthetics:&lt;value&gt;</code></td>
    <td>
        <code>on</code>,<br/>
        <code>off</code>
    </td>
    <td>
      Specifies whether to save some of the compiler-synthesized code in
      the currently unspecified <code>TextDocument.synthetics</code>
      section (<code>on</code> for yes, <code>off</code> for no).
    </td>
    <td><code>off</code></td>
  </tr>
</table>
<p><code>semanticdb-scalac</code> can be hooked into Scala builds in a number of ways. Read
below for more information on command-line tools as well as integration into
Scala build tools.</p>
<h3><a class="anchor" aria-hidden="true" id="metac"></a><a href="#metac" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Metac</h3>
<p>Metac is a command-line tool that serves as a drop-in replacement for <code>scalac</code>
and produces <code>*.semanticdb</code> files instead of <code>*.class</code> files. It supports the
same command-line arguments as <code>scalac</code>, including the compiler plugin options
<a href="#scalac-compiler-plugin">described above</a>.</p>
<pre><code class="hljs">metac [<span class="hljs-tag">&lt;<span class="hljs-name">pluginOption</span>&gt;</span> ...] [<span class="hljs-tag">&lt;<span class="hljs-name">scalacOption</span>&gt;</span> ...] [<span class="hljs-tag">&lt;<span class="hljs-name">sourceFile</span>&gt;</span> ...]
</code></pre>
<p>With metac, it is not necessary to provide the flags <code>-Xplugin:/path/to.jar</code> and
<code>-Yrangepos</code>, which makes it ideal for quick experiments with SemanticDB. For an
example of using Metac, check out <a href="#example">Example</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="sbt"></a><a href="#sbt" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sbt</h3>
<p>In order to enable <code>semanticdb-scalac</code> for your sbt project, add the following
to your build. Note that the compiler plugin requires the <code>-Yrangepos</code> compiler
option to be enabled.</p>
<pre><code class="hljs css language-scala">addCompilerPlugin(<span class="hljs-string">"org.scalameta"</span> % <span class="hljs-string">"semanticdb-scalac"</span> % <span class="hljs-string">"4.8.2"</span> cross <span class="hljs-type">CrossVersion</span>.full)
scalacOptions += <span class="hljs-string">"-Yrangepos"</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="consuming-semanticdb"></a><a href="#consuming-semanticdb" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Consuming SemanticDB</h2>
<h3><a class="anchor" aria-hidden="true" id="scala-bindings"></a><a href="#scala-bindings" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scala bindings</h3>
<p>The <code>semanticdb</code> library contains <a href="https://scalapb.github.io/">ScalaPB</a> bindings
to
<a href="https://github.com/scalameta/scalameta/blob/main/semanticdb/semanticdb/semanticdb.proto">the SemanticDB protobuf schema</a>.
Using this library, one can model SemanticDB entities as Scala case classes and
serialize/deserialize them into bytes and streams.</p>
<pre><code class="hljs">libraryDependencies += <span class="hljs-string">"org.scalameta"</span> %% <span class="hljs-string">"semanticdb"</span> % <span class="hljs-string">"4.8.2"</span>
</code></pre>
<p>Caveats:</p>
<ul>
<li>At the moment, there are no compatibility guarantees for Scala bindings to the
SemanticDB schema. The current package of the schema
(<code>scala.meta.internal.semanticdb</code>) is considered internal, so we do not
provide any guarantees about compatibility across different versions of the
<code>semanticdb</code> library. We are planning to
<a href="https://github.com/scalameta/scalameta/issues/1300">improve the situation</a> in
the future.</li>
<li>At the moment, SemanticDB-based tools are responsible for implementing
discovery of SemanticDB payloads on their own. For example, the non-trivial
logic that Metap uses to traverse its inputs and detect SemanticDB files must
be reproduced by Scalafix, Metadoc and others. We are planning to
<a href="https://github.com/scalameta/scalameta/issues/1566">improve the situation</a> in
the future.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="metap"></a><a href="#metap" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Metap</h3>
<p>Metap is a command-line tool that takes a list of paths and then prettyprints
all .semanticdb files that it finds in these paths. Advanced options control
prettyprinting format.</p>
<pre><code class="hljs">metap [<span class="hljs-keyword">options</span>] &lt;<span class="hljs-keyword">classpath</span>&gt;
</code></pre>
<table>
  <tr>
    <td width="125px">Option</td>
    <td>Value</td>
    <td>Explanation</td>
    <td width="125px">Default</td>
  </tr>
  <tr>
    <td><code>&lt;classpath&gt;</code></td>
    <td>Pseudo classpath</td>
    <td>
      Supported classpath entries:
      <ul>
        <li>
          .semanticdb files (prettyprinted directly)
        </li>
        <li>
          Directories (traversed recursively, all found .semanticdb files
          prettyprinted)
        </li>
        <li>
          .jar files (traversed recursively, all found .semanticdb files
          uncompressed and prettyprinted)
        </li>
      </ul>
    </td>
    <td></td>
  </tr>
  <tr>
    <td><code>-compact</code>,<br/><code>-detailed</code>,<br/><code>-proto</code></td>
    <td></td>
    <td>
      Specifies prettyprinting format, which can be either <code>-compact</code>
      (prints the most important parts of the payload in a condensed fashion),
      <code>-detailed</code> (more detailed than -compact, but still pretty
      condensed), or <code>-proto</code> (prints the same output as
      <code>protoc</code> would print, <a href="#protoc">see below</a>).
    </td>
    <td>
      <code>-compact</code>
    </td>
  </tr>
</table>
<p>For an example of using Metap, check out <a href="#example">Example</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="protoc"></a><a href="#protoc" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Protoc</h3>
<p>The Protocol Compiler tool (<code>protoc</code>) can inspect protobuf payloads in
<code>--decode</code> (takes a schema) and <code>--decode_raw</code> (doesn't need a schema) modes.
For the reference, here's
<a href="https://github.com/scalameta/scalameta/blob/main/semanticdb/semanticdb/semanticdb.proto">the SemanticDB protobuf schema</a>.</p>
<pre><code class="hljs"><span class="hljs-meta">$</span> <span class="hljs-string">tree</span>
<span class="hljs-attr">.</span>
<span class="hljs-meta">├──</span> <span class="hljs-string">META-INF</span>
<span class="hljs-meta">│</span>   <span class="hljs-string">└── semanticdb</span>
<span class="hljs-meta">│</span>       <span class="hljs-string">└── Test.scala.semanticdb</span>
<span class="hljs-meta">└──</span> <span class="hljs-string">Test.scala</span>

<span class="hljs-meta">$</span> <span class="hljs-string">protoc --proto_path &lt;directory with the .proto file&gt;\
--decode scala.meta.internal.semanticdb.TextDocuments\
semanticdb.proto &lt; META-INF/semanticdb/Test.scala.semanticdb</span>

<span class="hljs-attr">documents</span> <span class="hljs-string">{</span>
  <span class="hljs-attr">schema</span>: <span class="hljs-string">SEMANTICDB4</span>
  <span class="hljs-attr">uri</span>: <span class="hljs-string">"Test.scala"</span>
  <span class="hljs-attr">symbols</span> <span class="hljs-string">{</span>
    <span class="hljs-attr">symbol</span>: <span class="hljs-string">"_empty_/Test.main().(args)"</span>
    <span class="hljs-attr">kind</span>: <span class="hljs-string">PARAMETER</span>
    <span class="hljs-attr">name</span>: <span class="hljs-string">"args"</span>
    <span class="hljs-attr">access</span> <span class="hljs-string">{</span>
      <span class="hljs-attr">publicAccess</span> <span class="hljs-string">{</span>
      <span class="hljs-attr">}</span>
    <span class="hljs-attr">}</span>
    <span class="hljs-attr">language</span>: <span class="hljs-string">SCALA</span>
    <span class="hljs-attr">signature</span> <span class="hljs-string">{</span>
      <span class="hljs-attr">valueSignature</span> <span class="hljs-string">{</span>
        <span class="hljs-attr">tpe</span> <span class="hljs-string">{</span>
          <span class="hljs-attr">typeRef</span> <span class="hljs-string">{</span>
            <span class="hljs-attr">symbol</span>: <span class="hljs-string">"scala/Array#"</span>
            <span class="hljs-attr">type_arguments</span> <span class="hljs-string">{</span>
              <span class="hljs-attr">typeRef</span> <span class="hljs-string">{</span>
                <span class="hljs-attr">symbol</span>: <span class="hljs-string">"scala/Predef.String#"</span>
              <span class="hljs-attr">}</span>
            <span class="hljs-attr">}</span>
          <span class="hljs-attr">}</span>
        <span class="hljs-attr">}</span>
      <span class="hljs-attr">}</span>
    <span class="hljs-attr">}</span>
  <span class="hljs-attr">}</span>
  <span class="hljs-attr">symbols</span> <span class="hljs-string">{</span>
    <span class="hljs-attr">symbol</span>: <span class="hljs-string">"_empty_/Test."</span>
    <span class="hljs-attr">kind</span>: <span class="hljs-string">OBJECT</span>
    <span class="hljs-attr">properties</span>: <span class="hljs-string">8</span>
<span class="hljs-attr">...</span>
</code></pre>
<p><code>protoc</code> was useful for getting things done in the early days of SemanticDB, but
nowadays it's a bit too low-level. It is recommended to use <code>metap</code> instead of
<code>protoc</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="semanticdb-based-tools"></a><a href="#semanticdb-based-tools" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SemanticDB-based tools</h2>
<h3><a class="anchor" aria-hidden="true" id="scalafix"></a><a href="#scalafix" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scalafix</h3>
<p><a href="https://github.com/scalacenter/scalafix">Scalafix</a> is a rewrite and linting
tool for Scala developed at the Scala Center with the goal to help automate
migration between different Scala compiler and library versions.</p>
<p>Scalafix provides syntactic and semantic APIs that tool developers can use to
write custom rewrite and linting rules. Syntactic information is obtained from
<a href="https://github.com/scalameta/scalameta">the Scalameta parser</a>, and semantic
information is loaded from SemanticDB files produced by
<a href="#scalac-compiler-plugin">the Scalac compiler plugin</a>.</p>
<p>Thanks to SemanticDB, Scalafix is:</p>
<ul>
<li><strong>Accessible</strong>: Scalafix enables novices to implement advanced rules without
learning compiler internals.</li>
<li><strong>Portable</strong>: Scalafix is not tied to compiler internals, which means that it
can seamlessly work with any compiler / compiler version that supports
<a href="#scalac-compiler-plugin">the SemanticDB compiler plugin</a>.</li>
<li><strong>Scalable</strong>: Scalafix does not need a running Scala compiler, so it can
perform rewrites and lints in parallel. (Unlike compiler plugin-based linters
that are limited by the single-threaded architecture of Scalac).</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="metadoc"></a><a href="#metadoc" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Metadoc</h3>
<p><a href="https://github.com/scalameta/metadoc">Metadoc</a> is an experiment with SemanticDB
to build online code browser with IDE-like features. Check out
<a href="http://scalameta.org/metadoc/">the demo</a> for more information.</p>
<p>Metadoc takes Scala sources and corresponding SemanticDB files generated by
<a href="#scalac-compiler-plugin">the Scalac compiler plugin</a>. It then generates a
static site that is possible to serve via GitHub pages, supporting jump to
definition, find usages and search by symbol.</p>
<p>Thanks to SemanticDB, Metadoc is:</p>
<ul>
<li><strong>Cross-platform</strong>: <a href="#scala-bindings">Scala bindings to SemanticDB</a> are
cross-compiled to JVM and Scala.js, which means that the site generator and
the online code browser can reuse the same logic to work with SemanticDB
payloads.</li>
<li><strong>Portable</strong>: Just like Scalafix, Metadoc is not tied to compiler internals,
which means that it can seamlessly work with any compiler / compiler version
that supports <a href="#scalac-compiler-plugin">the SemanticDB compiler plugin</a>.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="metals"></a><a href="#metals" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Metals</h3>
<p><a href="https://github.com/scalameta/metals">Metals</a> is an experiment to implement a
<a href="https://github.com/Microsoft/language-server-protocol">language server</a> for
Scala using <a href="https://github.com/scalameta">Scalameta</a> projects such as Scalafmt,
Scalafix and SemanticDB. Check out
<a href="https://geirsson.com/assets/metals/">the presentation</a> for more information.</p>
<p>Metals uses SemanticDB to:</p>
<ul>
<li>Index project dependencies for intelligent jump to definition and quick
lookups of project symbols.</li>
<li>Communicate with the Scala compiler regarding semantic information about the
opened project.</li>
<li>Feed semantic information into <a href="#scalafix">Scalafix</a>-based refactorings.</li>
</ul>
<p>Thanks to SemanticDB, Metals is:</p>
<ul>
<li><strong>Mostly portable</strong>: Unlike Scalafix and Metadoc, Metals has modules that
interface directly with compiler internals, but the majority its functionality
is based on SemanticDB, so it can work with any compiler / compiler version
that supports <a href="#scalac-compiler-plugin">the SemanticDB compiler plugin</a>.</li>
<li><strong>Surprisingly fast</strong>: A well-defined schema for semantic information that can
come from multiple locations (dependency classpath, uncompiled files, compiled
files, etc) allows for a robust implementation of indexing, which reliably
speeds up operations like jump to definition and find usages. We have even
experimented with
<a href="https://github.com/scalameta/metals/pull/94">a relational index for SemanticDB data</a>,
which further improves performance characteristics.</li>
<li><strong>Resilient</strong>: Reification of semantic information makes it possible to
consult results of previous typechecks and accommodate certain edits by simply
shifting offsets in old SemanticDB snapshots. This technique is surprisingly
effective for supporting minor edits that result in temporarily invalid code.</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/trees/scaladoc.html"><span class="arrow-prev">← </span><span>Scaladoc</span></a><a class="docs-next button" href="/docs/semanticdb/specification.html"><span>Specification</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#installation">Installation</a></li><li><a href="#example">Example</a></li><li><a href="#what-is-semanticdb-good-for">What is SemanticDB good for?</a></li><li><a href="#producing-semanticdb">Producing SemanticDB</a><ul class="toc-headings"><li><a href="#scalac-compiler-plugin">Scalac compiler plugin</a></li><li><a href="#metac">Metac</a></li><li><a href="#sbt">sbt</a></li></ul></li><li><a href="#consuming-semanticdb">Consuming SemanticDB</a><ul class="toc-headings"><li><a href="#scala-bindings">Scala bindings</a></li><li><a href="#metap">Metap</a></li><li><a href="#protoc">Protoc</a></li></ul></li><li><a href="#semanticdb-based-tools">SemanticDB-based tools</a><ul class="toc-headings"><li><a href="#scalafix">Scalafix</a></li><li><a href="#metadoc">Metadoc</a></li><li><a href="#metals">Metals</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer" style="background-color:#181A1F"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/scalameta.png" alt="Scalameta" width="66" height="58"/></a><div><h5>Scalameta Docs</h5><a href=" /docs/trees/guide.html">Trees Guide</a><a href=" /docs/trees/quasiquotes.html">Quasiquotes</a><a href=" /docs/semanticdb/specification.html">SemanticDB</a></div><div><h5>Scalameta Projects</h5><a href="https://scalameta.org/metals">Metals: language server</a><a href="https://scalameta.org/scalafmt">Scalafmt: code formatter</a><a href="https://scalacenter.github.io/scalafix">Scalafix: linting and refactoring tool</a><a href="https://scalameta.org/munit">MUnit: testing library</a><a href="https://scalameta.org/mdoc">MDoc: documentation tool</a><a href="https://github.com/scalameta/metabrowse">Metabrowse: online code browser</a></div><div><h5>Community</h5><a href="https://github.com/scalameta/scalameta" target="_blank">GitHub</a><a href="https://github.com/scalameta/scalameta" target="_blank"><img src="https://img.shields.io/github/stars/scalameta/metals.svg?color=%23087e8b&amp;label=stars&amp;logo=github&amp;style=social"/></a><a href="https://discord.gg/RFpSVth" target="_blank"><img src="https://img.shields.io/discord/632642981228314653?logo=discord&amp;style=social"/></a><a href="https://gitter.im/scalameta/scalameta" target="_blank"><img src="https://img.shields.io/gitter/room/scalameta/scalameta.svg?logo=gitter&amp;style=social"/></a><a href="https://twitter.com/scalameta" target="_blank"><img src="https://img.shields.io/twitter/follow/scalameta.svg?logo=twitter&amp;style=social"/></a></div></section><section class="copyright">Copyright © 2023 Scalameta</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0460d1c693a278bc1ad07ada3fb96c63',
                indexName: 'scalameta',
                inputSelector: '#search_input_react'
              });
            </script></body></html>