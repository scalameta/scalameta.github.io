<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>SemanticDB Guide · Scalameta</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="SemanticDB is a data model for semantic information such as symbols and types"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="SemanticDB Guide · Scalameta"/><meta property="og:type" content="website"/><meta property="og:url" content="https://scalameta.org/index.html"/><meta property="og:description" content="SemanticDB is a data model for semantic information such as symbols and types"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css"/><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/scalameta.png" alt="Scalameta"/><h2 class="headerTitleWithLogo">Scalameta</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/trees/guide.html" target="_self">Trees</a></li><li class="siteNavGroupActive siteNavItemActive"><a href="/docs/semanticdb/guide.html" target="_self">SemanticDB</a></li><li class=""><a href="https://github.com/scalameta/scalameta" target="_blank">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>SemanticDB</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Trees</h3><ul><li class="navListItem"><a class="navItem" href="/docs/trees/guide.html">Guide</a></li><li class="navListItem"><a class="navItem" href="/docs/trees/quasiquotes.html">Quasiquotes</a></li><li class="navListItem"><a class="navItem" href="/docs/trees/scalafiddle.html">ScalaFiddle Playground</a></li><li class="navListItem"><a class="navItem" href="/docs/trees/astexplorer.html">AST Explorer</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">SemanticDB</h3><ul><li class="navListItem navListItemActive"><a class="navItem" href="/docs/semanticdb/guide.html">Guide</a></li><li class="navListItem"><a class="navItem" href="/docs/semanticdb/specification.html">Specification</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Community</h3><ul><li class="navListItem"><a class="navItem" href="/docs/misc/built-with-scalameta.html">Built with Scalameta</a></li><li class="navListItem"><a class="navItem" href="/docs/misc/presentations.html">Presentations</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docMainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">SemanticDB Guide</h1></header><article><div><span><p>SemanticDB is a data model for semantic information such as symbols and types
about programs in Scala and other languages. SemanticDB decouples production and
consumption of semantic information, establishing documented means for
communication between tools.</p>
<p>In this document, we introduce practical aspects of working with SemanticDB. We
describe the tools that can be used to produce SemanticDB payloads, the tools
can be used to consume SemanticDB payloads and useful tips &amp; tricks for working
with SemanticDB. If you're looking for a comprehensive reference of SemanticDB
features, check out <a href="specification.html">the specification</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="installation"></a><a href="#installation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h2>
<p>This guide covers several non-standard command-line tools: <code>metac</code>, <code>metacp</code>,
<code>metap</code>. To install these tools on your computer, you can do the following:</p>
<ol>
<li>Install the <code>coursier</code> command-line tool by following the
<a href="https://github.com/coursier/coursier/#command-line">instructions here</a>.
Make sure you are using the latest coursier version (1.1.0-M6 or newer).</li>
<li>Add the following aliases to your shell:</li>
</ol>
<p><a href="https://maven-badges.herokuapp.com/maven-central/org.scalameta/scalameta_2.12"><img src="https://maven-badges.herokuapp.com/maven-central/org.scalameta/scalameta_2.12/badge.svg" alt="Maven Central"></a></p>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">alias</span> metac=<span class="hljs-string">"coursier launch org.scalameta:metac_2.12.6:4.0.0-M10 -- -cp <span class="hljs-variable">$(coursier fetch -p org.scala-lang:scala-library:2.12.6)</span>"</span>
<span class="hljs-built_in">alias</span> metacp=<span class="hljs-string">'coursier launch org.scalameta:metacp_2.12:4.0.0-M6 -- --dependency-classpath $(echo $JAVA_HOME/jre/lib/rt.jar):$(coursier fetch org.scala-lang:scala-library:2.12.4 -p)'</span>
<span class="hljs-built_in">alias</span> metap=<span class="hljs-string">"coursier launch org.scalameta:metap_2.11:4.0.0-M10 --"</span>
</code></pre>
<p>NOTE. These installation instructions are for the current unstable <code>master</code> branch,
it's recommended to view this document at the latest git tag instead of <code>master</code>.</p>
<p>(Optional) Instead of running <code>metap</code> on the JVM, you can build a native binary
on macOS or Linux. Thanks to <a href="https://scala-native.readthedocs.io/en/latest/">Scala Native</a>,
native Metap works much faster than regular Metap (on a personal laptop of
one of the authors of this guide, a simple Metap invocation takes 500+ ms on JVM
and 10 ms on native).</p>
<ol>
<li>Install the <a href="https://github.com/coursier/coursier/#command-line-1"><code>coursier</code></a> command-line
version 1.1.0-M6 or later.</li>
<li>Setup the <a href="http://www.scala-native.org/en/latest/user/setup.html#installing-clang-and-runtime-dependencies">development environment for Scala Native</a>.</li>
<li>Link a native <code>metap</code> binary.</li>
</ol>
<pre><code class="hljs css language-bash">coursier bootstrap org.scalameta:metap_native0.3_2.11:4.0.0-M6 -o metap -f --native --main scala.meta.cli.Metap
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h2>
<p>Let's generate SemanticDB for a simple Scala program. (At the moment,
our SemanticDB producers provide full Scala support and partial Java support.
Theoretically, <a href="https://github.com/scalameta/scalameta/blob/master/semanticdb/semanticdb/semanticdb.proto">the SemanticDB protobuf schema</a>
can accommodate other languages as well, but we haven't attempted to do that yet).</p>
<pre><code class="hljs css language-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Test</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    println(<span class="hljs-string">"hello world"</span>)
  }
}
</code></pre>
<p>In order to obtain a SemanticDB corresponding to this program, let's use
the Metac command-line tool. For more information on other tools that can
produce SemanticDB, <a href="#producing-semanticdb">see below</a>.</p>
<pre><code class="hljs"><span class="hljs-meta">$</span><span class="bash"> metac Test.scala</span>
</code></pre>
<p><code>metac</code> is a thin wrapper over the Scala compiler. It supports the same
command-line arguments as <code>scalac</code> supports, but instead of generating .class
files it generates .semanticdb files. Newer versions of Metac may also generate
an accompanying .semanticidx file, but it's an experimental feature, so we won't
won't be discussing it in this document.</p>
<pre><code class="hljs">$ tree
.
├── META-<span class="hljs-keyword">INF</span>
│   └── semanticdb
│       └── <span class="hljs-keyword">Test</span>.<span class="hljs-keyword">scala</span>.semanticdb
└── <span class="hljs-keyword">Test</span>.<span class="hljs-keyword">scala</span>
</code></pre>
<p>If we take a look inside Test.scala.semanticdb, we'll see a weird mix of
legible-looking text and special characters. That's because .semanticdb
files store protobuf payloads.</p>
<pre><code class="hljs">$ xxd META-INF/semanticdb/Test.scala.semanticdb
<span class="hljs-number">00000000</span>: <span class="hljs-number">0</span>aaa <span class="hljs-number">0408 0412</span> <span class="hljs-number">0a54 6573</span> <span class="hljs-number">742</span>e <span class="hljs-number">7363</span> <span class="hljs-number">616</span>c  .......Test.scal
<span class="hljs-number">00000010</span>: <span class="hljs-number">612</span>a <span class="hljs-number">580</span>a <span class="hljs-number">1</span>a5f <span class="hljs-number">656d</span> <span class="hljs-number">7074</span> <span class="hljs-number">795</span>f <span class="hljs-number">2f54 6573</span>  a*X.._empty_/Tes
<span class="hljs-number">00000020</span>: <span class="hljs-number">742</span>e <span class="hljs-number">6d</span>61 <span class="hljs-number">696</span>e <span class="hljs-number">2829 2e28</span> <span class="hljs-number">6172 6773</span> <span class="hljs-number">2918</span>  t.main().(args).
<span class="hljs-number">00000030</span>: <span class="hljs-number">082</span>a <span class="hljs-number">0461 7267</span> <span class="hljs-number">7380 0101</span> <span class="hljs-number">8a01 2e22</span> <span class="hljs-number">2</span>c0a  .*.args......",.
<span class="hljs-number">00000040</span>: <span class="hljs-number">2a12 2812</span> <span class="hljs-number">0c73 6361</span> <span class="hljs-number">6c61 2f41</span> <span class="hljs-number">7272 6179</span>  *.(..scala/Array
<span class="hljs-number">00000050</span>: <span class="hljs-number">231</span>a <span class="hljs-number">1812 1612</span> <span class="hljs-number">1473 6361</span> <span class="hljs-number">6c61 2f50</span> <span class="hljs-number">7265</span>  #......scala/Pre
<span class="hljs-number">00000060</span>: <span class="hljs-number">6465</span> <span class="hljs-number">662</span>e <span class="hljs-number">5374 7269</span> <span class="hljs-number">6</span>e67 <span class="hljs-number">232</span>a <span class="hljs-number">530</span>a <span class="hljs-number">0d</span>5f  def.String#*S.._
<span class="hljs-number">00000070</span>: <span class="hljs-number">656d</span> <span class="hljs-number">7074</span> <span class="hljs-number">795</span>f <span class="hljs-number">2f54 6573</span> <span class="hljs-number">742</span>e <span class="hljs-number">180</span>a <span class="hljs-number">2008</span>  empty_/Test... .
<span class="hljs-number">00000080</span>: <span class="hljs-number">2a04 5465</span> <span class="hljs-number">7374 8001</span> <span class="hljs-number">018</span>a <span class="hljs-number">012</span>f <span class="hljs-number">0</span>a2d <span class="hljs-number">0</span>a00  *.Test...../.-..
<span class="hljs-number">00000090</span>: <span class="hljs-number">1211</span> <span class="hljs-number">120</span>f <span class="hljs-number">120d</span> <span class="hljs-number">7363</span> <span class="hljs-number">616</span>c <span class="hljs-number">612</span>f <span class="hljs-number">416</span>e <span class="hljs-number">7952</span>  ......scala/AnyR
<span class="hljs-number">000000a0</span>: <span class="hljs-number">6566 2322</span> <span class="hljs-number">160</span>a <span class="hljs-number">145</span>f <span class="hljs-number">656d</span> <span class="hljs-number">7074</span> <span class="hljs-number">795</span>f <span class="hljs-number">2</span>f54  ef#"..._empty_/T
<span class="hljs-number">000000b0</span>: <span class="hljs-number">6573</span> <span class="hljs-number">742</span>e <span class="hljs-number">6d</span>61 <span class="hljs-number">696</span>e <span class="hljs-number">2829 2e92</span> <span class="hljs-number">0102 3a00</span>  est.main()....:.
<span class="hljs-number">000000c0</span>: <span class="hljs-number">2</span>a5c <span class="hljs-number">0a14 5f65</span> <span class="hljs-number">6d70 7479</span> <span class="hljs-number">5</span>f2f <span class="hljs-number">5465 7374</span>  *\.._empty_/Test
...
</code></pre>
<p>In order to make sense of .semanticdb files, we can use the Metap
command-line tool. For more information on other tools that can
consume SemanticDB, <a href="#consuming-semanticdb">see below</a>.</p>
<pre><code class="hljs">$ metap .
<span class="hljs-keyword">Test</span>.scala
----------

Summary:
Schema =&gt; SemanticDB v4
Uri =&gt; <span class="hljs-keyword">Test</span>.scala
Text =&gt; empty
<span class="hljs-keyword">Language</span> =&gt; Scala
Symbols =&gt; <span class="hljs-number">3</span> entries
Occurrences =&gt; <span class="hljs-number">7</span> entries

Symbols:
_empty_/<span class="hljs-keyword">Test</span>. =&gt; final object <span class="hljs-keyword">Test</span> extends AnyRef { +<span class="hljs-number">1</span> decls }
_empty_/<span class="hljs-keyword">Test</span>.main(). =&gt; method main(args: Array[String]): Unit
_empty_/<span class="hljs-keyword">Test</span>.main().(args) =&gt; param args: Array[String]

Occurrences:
[<span class="hljs-number">0</span>:<span class="hljs-number">7.</span><span class="hljs-number">.0</span>:<span class="hljs-number">11</span>) &lt;= _empty_/<span class="hljs-keyword">Test</span>.
[<span class="hljs-number">1</span>:<span class="hljs-number">6.</span><span class="hljs-number">.1</span>:<span class="hljs-number">10</span>) &lt;= _empty_/<span class="hljs-keyword">Test</span>.main().
[<span class="hljs-number">1</span>:<span class="hljs-number">11.</span><span class="hljs-number">.1</span>:<span class="hljs-number">15</span>) &lt;= _empty_/<span class="hljs-keyword">Test</span>.main().(args)
[<span class="hljs-number">1</span>:<span class="hljs-number">17.</span><span class="hljs-number">.1</span>:<span class="hljs-number">22</span>) =&gt; scala/Array#
[<span class="hljs-number">1</span>:<span class="hljs-number">23.</span><span class="hljs-number">.1</span>:<span class="hljs-number">29</span>) =&gt; scala/Predef.String#
[<span class="hljs-number">1</span>:<span class="hljs-number">33.</span><span class="hljs-number">.1</span>:<span class="hljs-number">37</span>) =&gt; scala/Unit#
[<span class="hljs-number">2</span>:<span class="hljs-number">4.</span><span class="hljs-number">.2</span>:<span class="hljs-number">11</span>) =&gt; scala/Predef.println(+<span class="hljs-number">1</span>).
</code></pre>
<p>Metap prettyprints various parts of the SemanticDB payload in correspondence
with <a href="specification.html">the SemanticDB specification</a>. Here are the most
important parts:</p>
<ul>
<li><p><code>Uri</code> stores the URI of the source file relative to
the directory where the SemanticDB producer was invoked.</p></li>
<li><p><code>Symbols</code> contains information about definitions in the source
file, including modifiers, signatures, etc.</p>
<p>For example, <code>_empty_/Test.main(). =&gt; method main: (args: Array[String]): Unit</code>
says that <code>main</code> is a method with one parameter of type <code>Array[String]</code>.</p></li>
<li><p><code>Occurrences</code> contains a list of identifiers from the source file with
their line/column-based positions and unique identifiers pointing to
corresponding definitions resolved by the compiler.</p>
<p>For example, <code>[2:4..2:11): println =&gt; scala/Predef.println(+1).</code> says that
the identifier <code>println</code> on line 3 (zero-based numbering scheme!) refers
to the second overload of <code>println</code> from <code>scala/Predef</code>.</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="what-is-semanticdb-good-for"></a><a href="#what-is-semanticdb-good-for" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is SemanticDB good for?</h2>
<p>SemanticDB decouples producers and consumers of semantic information about
programs and establishes <a href="specification.html">a rigorous specification</a> of the
interchange format.</p>
<p>Thanks to that, SemanticDB-based tools like <a href="#scalafix">Scalafix</a>,
<a href="#metadoc">Metadoc</a> and <a href="#metals">Metals</a> don't need to know about compiler
internals and can work with any compiler that supports SemanticDB.
This demonstrably improves developer experience, portability and scalability.
Next-generation semantic tools at Twitter are based on SemanticDB.</p>
<p>For more information about the SemanticDB vision, check out our talks:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=4yqDFsdKciA">Semantic Tooling at Twitter</a>
(June 2017) by Eugene Burmako &amp; Stu Hood.</li>
<li><a href="https://t.co/Z080F6JxyQ?amp=1">SemanticDB for Scala developer tools</a>
(April 2018) by Ólafur Páll Geirsson.</li>
<li><a href="https://na.scaladays.org/schedule/how-we-built-tools-that-scale-to-millions-of-lines-of-code">How We Built Tools That Scale to Millions of Lines of Code</a>
(June 2018) by Eugene Burmako.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="producing-semanticdb"></a><a href="#producing-semanticdb" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Producing SemanticDB</h2>
<h3><a class="anchor" aria-hidden="true" id="scalac-compiler-plugin"></a><a href="#scalac-compiler-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scalac compiler plugin</h3>
<p>The <code>semanticdb-scalac</code> compiler plugin injects itself immediately after the
<code>typer</code> phase of the Scala compiler and then harvests and dumps semantic
information from Scalac in SemanticDB format.</p>
<pre><code class="hljs">scalac <span class="hljs-params">-Xplugin</span>:path/<span class="hljs-keyword">to</span>.jar <span class="hljs-params">-Yrangepos</span> <span class="hljs-meta">[</span>&lt;pluginOption&gt; <span class="hljs-params">...</span><span class="hljs-meta">]</span> <span class="hljs-meta">[</span>&lt;scalacOption&gt; <span class="hljs-params">...</span><span class="hljs-meta">]</span> <span class="hljs-meta">[</span>&lt;sourceFile&gt; <span class="hljs-params">...</span><span class="hljs-meta">]</span>
</code></pre>
<p>The compiler plugin supports the following options that can
be passed through Scalac in the form of <code>-P:semanticdb:&lt;option&gt;:&lt;value&gt;</code></p>
<table>
  <tr>
    <td width="310px">Option</td>
    <td>Value</td>
    <td>Explanation</td>
    <td>Default</td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:failures:&lt;value&gt;</code></td>
    <td>
      <code>error</code>,<br/>
      <code>warning</code>,<br/>
      <code>info</code>,<br/>
      <code>ignore</code></td>
    <td>
      The level at which the Scala compiler should report crashes that may
      happen during SemanticDB generation.
    </td>
    <td><code>warning</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:profiling:&lt;value&gt;</code></td>
    <td>
      <code>on</code>,<br/>
      <code>off</code><br/>
    </td>
    <td>
      Controls basic profiling functionality that computes the overhead of
      SemanticDB generation relative to regular compilation time
      (<code>on</code> for dumping profiling information to console,
      <code>off</code> for disabling profiling).
    </td>
    <td><code>off</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:include:&lt;value&gt;</code></td>
    <td>Java regex</td>
    <td>Which source files to include in SemanticDB generation?</td>
    <td><code>.*</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:exclude:&lt;value&gt;</code></td>
    <td>Java regex</td>
    <td>Which source files to exclude from SemanticDB generation?</td>
    <td><code>^$</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:sourceroot:&lt;value&gt;</code></td>
    <td>Absolute or relative path</td>
    <td>
      Used to relativize source file paths into
      <code>TextDocument.uri</code>.
    </td>
    <td>Current working directory</td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:targetroot:&lt;value&gt;</code></td>
    <td>Absolute or relative path</td>
    <td>
      The output directory to produce <code>META-INF/semanticdb/**/*.semanticdb</code>
      files.
    </td>
    <td>
      The compiler output directory, matches the sbt setting key <code>classDirectory</code>
      and scalac command-line option <code>-d</code>.
    </td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:text:&lt;value&gt;</code></td>
    <td>
        <code>on</code>,<br/>
        <code>off</code>
    </td>
    <td>
      Specifies whether to save source code in
      <code>TextDocument.text</code> (<code>on</code> for yes,
      <code>off</code> for no).
    </td>
    <td><code>off</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:md5:&lt;value&gt;</code></td>
    <td>
        <code>on</code>,<br/>
        <code>off</code>
    </td>
    <td>
      Specifies whether to save a hexadecimal formatted MD5 fingerprint of the source
      file contents in <code>TextDocument.md5</code> (<code>on</code> for yes,
      <code>off</code> for no).
    </td>
    <td><code>on</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:symbols:&lt;value&gt;</code></td>
    <td>
        <code>all</code>,<br/>
        <code>local-only</code>,<br/>
        <code>none</code>
    </td>
    <td>
      Specifies which symbol informations to save in
      <code>TextDocument.symbols</code> (<code>all</code> for both local and global symbols,
      <code>local-only</code> for only local symbols and
      <code>none</code> for no symbols).
    </td>
    <td><code>all</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:diagnostics:&lt;value&gt;</code></td>
    <td>
        <code>on</code>,<br/>
        <code>off</code>
    </td>
    <td>
      Specifies whether to save compiler messages in
      <code>TextDocument.diagnostics</code> (<code>on</code> for yes,
      <code>off</code> for no).
    </td>
    <td><code>on</code></td>
  </tr>
  <tr>
    <td><code>-P:semanticdb:synthetics:&lt;value&gt;</code></td>
    <td>
        <code>on</code>,<br/>
        <code>off</code>
    </td>
    <td>
      Specifies whether to save some of the compiler-synthesized code in
      the currently unspecified <code>TextDocument.synthetics</code>
      section (<code>on</code> for yes, <code>off</code> for no).
    </td>
    <td><code>on</code></td>
  </tr>
</table>
<p><code>semanticdb-scalac</code> can be hooked into Scala builds in a number of ways.
Read below for more information on command-line tools as well as integration
into Scala build tools.</p>
<h3><a class="anchor" aria-hidden="true" id="metac"></a><a href="#metac" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Metac</h3>
<p>Metac is a command-line tool that serves as a drop-in replacement for <code>scalac</code>
and produces <code>*.semanticdb</code> files instead of <code>*.class</code> files. It supports the
same command-line arguments as <code>scalac</code>, including the compiler plugin options
<a href="#scalac-compiler-plugin">described above</a>.</p>
<pre><code class="hljs">metac <span class="hljs-string">[&lt;pluginOption&gt; ...]</span> <span class="hljs-string">[&lt;scalacOption&gt; ...]</span> <span class="hljs-string">[&lt;sourceFile&gt; ...]</span>
</code></pre>
<p>With metac, it is not necessary to provide the flags
<code>-Xplugin:/path/to.jar</code> and <code>-Yrangepos</code>, which makes it ideal
for quick experiments with SemanticDB. For an example of using Metac,
check out <a href="#example">Example</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="sbt"></a><a href="#sbt" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sbt</h3>
<p>In order to enable <code>semanticdb-scalac</code> for your sbt project, add the following
to your build. Note that the compiler plugin requires the <code>-Yrangepos</code> compiler
option to be enabled.</p>
<pre><code class="hljs css language-scala">addCompilerPlugin(<span class="hljs-string">"org.scalameta"</span> % <span class="hljs-string">"semanticdb-scalac"</span> % <span class="hljs-string">"4.0.0-M6"</span> cross <span class="hljs-type">CrossVersion</span>.full)
scalacOptions += <span class="hljs-string">"-Yrangepos"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="javac-compiler-plugin"></a><a href="#javac-compiler-plugin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Javac compiler plugin</h3>
<p>The <code>semanticdb-javac</code> compiler plugin collects and dumps SemanticDB information after the analyze
phase of the Java compiler. It currently only produces symbol information, not occurrences.</p>
<p>To use it, follow these instructions:</p>
<ol>
<li><p>Install the plugin by adding a dependency to <code>org.scalameta:semanticdb-javac</code> in your build, or by running:</p>
<p><code>$ coursier fetch --intransitive org.scalameta:semanticdb-javac_2.12:4.0.0-M4</code></p></li>
<li><p>Add the plugin to your build's compile classpath. If invoking <code>javac</code> directly add it as one of the listed <code>-cp</code> entries. Otherwise, adding the plugin as a library dependency in your build tool should be enough.</p></li>
<li><p>Add the following javac option:</p>
<p><code>&quot;-Xplugin:semanticdb &lt;target-dir&gt; --sourceroot &lt;source-root&gt;&quot;</code></p>
<blockquote>
<p><strong>Note</strong>: Giving quotes around this option is necessary on the command line, as that is how javac is able to tell what arguments belong to the plugin. If you are constructing the javac command programmatically as a sequence of string arguments, then this should be a single string without quotes.</p>
</blockquote>
<p>Replace <code>&lt;target-dir&gt;</code> with whatever directory you want the generated SemanticDB to live in, and
replace <code>&lt;source-root&gt;</code> with the root you want source file URIs to be relative to.
If <code>&lt;source-root&gt;</code> is omitted, it defaults to the current working directory.</p></li>
</ol>
<p>For example, a full javac invocation using the plugin would look like:</p>
<pre><code class="hljs">javac "-Xplugin:semanticdb java-project/target/semanticdb --sourceroot java-project/" \
  -<span class="ruby">cp &lt;classpath&gt;<span class="hljs-symbol">:&lt;path-to-semanticdb-javac</span>.jar&gt; \
</span>  -<span class="ruby">d java-project/target/classes \
</span>  java-project/src/main/File1.java java-project/src/main/File2.java
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="metacp"></a><a href="#metacp" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Metacp</h3>
<p>Metacp is a command-line tool that takes a classpath, generates SemanticDB files
for all classfiles and returns a new classpath that contains the SemanticDB files.
Advanced command-line options control caching, parallelization and interaction
with some quirks of the Scala standard library.</p>
<pre><code class="hljs">metacp [<span class="hljs-keyword">options</span>] &lt;<span class="hljs-keyword">classpath</span>&gt;
</code></pre>
<table>
  <tr>
    <td width="200px">Option</td>
    <td width="100px">Value</td>
    <td>Explanation</td>
    <td>Default</td>
  </tr>
  <tr>
    <td><code>&lt;classpath&gt;</code></td>
    <td>Java classpath</td>
    <td>
      Specifies classpath to be converted to SemanticDB.
    </td>
    <td></td>
  </tr>
  <tr>
    <td><code>--dependency-classpath &lt;value&gt</code></td>
    <td>Java classpath</td>
    <td>
      The classpath for library dependencies to compute external library references.
      For example, should include the JDK and scala-library if those are not
      part of <code>&lt;classpath&gt;</code>. The difference between
      <code>&lt;classpath&gt;</code> and <code>--dependency-classpath</code> is
      that entries in <code>--dependency-classpath</code> will not be processed
      for <code>--out</code>.
    </td>
    <td>
      Empty.
    </td>
  </tr>
  <tr>
    <td><code>--out &lt;value&gt</code></td>
    <td>Absolute or relative path</td>
    <td>
      Says where Metacp should output conversion results.
    </td>
    <td>
      See below
    </td>
  </tr>
  <tr>
    <td>
      <code>--exclude-scala-library-synthetics</code>,<br/>
      <code>--include-scala-library-synthetics</code>
    </td>
    <td></td>
    <td>
      Specifies whether the output classpath should include a jar that contains
      SemanticDB files corresponding to definitions missing from
      <code>scala-library.jar</code>, e.g. <code>scala.Any</code>,
      <code>scala.AnyRef</code> and others.
    </td>
    <td>
      <code>--exclude-scala-library-synthetics</code>
    </td>
  </tr>
  <tr>
    <td><code>--par</code>,<br/><code>--no-par</code></td>
    <td></td>
    <td>
      Toggles parallel processing. If enabled, classpath entries
      will be converted in parallel.
      <br/>
      <br/>
      NOTE: Some of our users <a href="https://github.com/scalameta/scalameta/issues/1398">have reported deadlocks</a>
      supposedly caused by enabling <code>--par</code>. Proceed at your own risk.
    </td>
    <td>
      <code>--no-par</code>
    </td>
  </tr>
  <tr>
    <td><code>--verbose</code></td>
    <td></td>
    <td>
      Toggles periodic progress printouts that help gauge Metacp's progress
      for long-running invocations.
    </td>
    <td>
      <code></code>
    </td>
  </tr>
  <tr>
    <td><code>--usejavacp</code></td>
    <td></td>
    <td>
      Attempts to autodetect the locations of JDK libraries and the Scala library
      based on the Metacp's classloader, so that these libraries don't have to be
      specified in <code>--dependency-classpath</code>.
    </td>
    <td>
      <code></code>
    </td>
  </tr>
  <tr>
    <td><code>--stub-broken-signatures</code></td>
    <td></td>
    <td>
      Catches exceptions that arise during generation of `Signature` payloads
      and stubs these payloads with `NoSignature` values instead of failing Metacp
      invocations. May be useful for dealing with missing symbol errors arising
      from missing optional dependencies.
    </td>
    <td>
      <code></code>
    </td>
  </tr>
  <tr>
    <td><code>--log-broken-signatures</code></td>
    <td></td>
    <td>
      Logs exceptions that arise during generation of `Signature` payloads.
      May be useful in combination with <code>--stub-broken-signatures</code>
      to have a sense of what exactly is being stubbed.
    </td>
    <td>
      <code></code>
    </td>
  </tr>
</table>
<p>Metacp understands classfiles produced by both the Scala and Java compiler.
Since Metacp is a standalone application independent from the Scala compiler,
the <a href="#scalac-compiler-plugin">compiler plugin</a> is not required when using Metacp.</p>
<p>Because Metacp only works with classfiles and not sources, SemanticDB files
that it produces only contain the <code>Symbols</code> section. Neither <code>Occurrences</code>
nor <code>Diagnostics</code> sections are present, because they both require source
information. For more information about the SemanticDB format, check out
<a href="specification.html">the specification</a>.</p>
<p>As an example of using Metacp, let's compile Test.scala from
<a href="#example">Example</a> using Scalac and then convert
the resulting classfiles to SemanticDB. Note that newer versions of Metac
may also generate an accompanying .semanticidx file, but it's an experimental
feature, so we won't be discussing it in this document.</p>
<pre><code class="hljs">$ scalac <span class="hljs-keyword">Test</span>.<span class="hljs-keyword">scala</span>
&lt;success&gt;

$ tree
.
├── <span class="hljs-keyword">Test</span>$.<span class="hljs-keyword">class</span>
├── <span class="hljs-keyword">Test</span>.<span class="hljs-keyword">class</span>
└── <span class="hljs-keyword">Test</span>.<span class="hljs-keyword">scala</span>

$ metacp .
{
  <span class="hljs-string">"status"</span>: {
    <span class="hljs-string">"/Users/ollie/dev/scalameta/target/."</span>: <span class="hljs-string">"/Users/ollie/dev/scalameta/target/out/target"</span>
  },
  <span class="hljs-string">"scalaLibrarySynthetics"</span>: <span class="hljs-string">""</span>
}
$ tree <span class="hljs-keyword">out</span>
<span class="hljs-keyword">out</span>
└── target
    └── META-<span class="hljs-keyword">INF</span>
        └── semanticdb
            └── <span class="hljs-keyword">Test</span>.<span class="hljs-keyword">class</span>.semanticdb

$ metap <span class="hljs-keyword">out</span>/target
<span class="hljs-keyword">Test</span>.<span class="hljs-keyword">class</span>
----------

Summary:
Schema =&gt; SemanticDB v4
Uri =&gt; <span class="hljs-keyword">Test</span>.<span class="hljs-keyword">class</span>
Text =&gt; empty
Language =&gt; <span class="hljs-keyword">Scala</span>
Symbols =&gt; 3 entries

Symbols:
_empty_/<span class="hljs-keyword">Test</span>. =&gt; final object <span class="hljs-keyword">Test</span> extends AnyRef { +1 decls }
_empty_/<span class="hljs-keyword">Test</span>.main(). =&gt; method main(<span class="hljs-keyword">args</span>: Array[String]): Unit
_empty_/<span class="hljs-keyword">Test</span>.main().(<span class="hljs-keyword">args</span>) =&gt; param <span class="hljs-keyword">args</span>: Array[String]
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="consuming-semanticdb"></a><a href="#consuming-semanticdb" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Consuming SemanticDB</h2>
<h3><a class="anchor" aria-hidden="true" id="scala-bindings"></a><a href="#scala-bindings" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scala bindings</h3>
<p>The <code>semanticdb</code> library contains <a href="https://scalapb.github.io/">ScalaPB</a>
bindings to <a href="https://github.com/scalameta/scalameta/blob/master/semanticdb/semanticdb/semanticdb.proto">the SemanticDB protobuf schema</a>. Using this
library, one can model SemanticDB entities as Scala case classes and
serialize/deserialize them into bytes and streams.</p>
<pre><code class="hljs">libraryDependencies += <span class="hljs-string">"org.scalameta"</span> %% <span class="hljs-string">"semanticdb"</span> % <span class="hljs-string">"4.0.0-M6"</span>
</code></pre>
<p><code>semanticdb</code> is available for all supported Scala platforms - JVM, Scala.js
and Scala Native. For more information, check out autogenerated documentation for
<a href="https://static.javadoc.io/org.scalameta/semanticdb_2.11/4.0.0-M6/scala/meta/internal/semanticdb/TextDocuments.html">Scala 2.11</a>
and <a href="https://static.javadoc.io/org.scalameta/semanticdb_2.12/4.0.0-M6/scala/meta/internal/semanticdb/TextDocuments.html">Scala 2.12</a>.</p>
<p>Caveats:</p>
<ul>
<li>At the moment, there are no compatibility guarantees for Scala bindings to the SemanticDB
schema. The current package of the schema (<code>scala.meta.internal.semanticdb</code>)
is considered internal, so we do not provide any guarantees about
compatibility across different versions of the <code>semanticdb</code> library.
We are planning to <a href="https://github.com/scalameta/scalameta/issues/1300">improve the situation</a>
in the future.</li>
<li>At the moment, SemanticDB-based tools are responsible for implementing discovery of
SemanticDB payloads on their own. For example, the non-trivial logic that
Metap uses to traverse its inputs and detect SemanticDB files must be
reproduced by Scalafix, Metadoc and others. We are planning to
<a href="https://github.com/scalameta/scalameta/issues/1566">improve the situation</a>
in the future.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="metap"></a><a href="#metap" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Metap</h3>
<p>Metap is a command-line tool that takes a list of paths and then prettyprints
all .semanticdb files that it finds in these paths. Advanced options control
prettyprinting format.</p>
<pre><code class="hljs">metap [<span class="hljs-keyword">options</span>] &lt;<span class="hljs-keyword">classpath</span>&gt;
</code></pre>
<table>
  <tr>
    <td width="125px">Option</td>
    <td>Value</td>
    <td>Explanation</td>
    <td width="125px">Default</td>
  </tr>
  <tr>
    <td><code>&lt;classpath&gt;</code></td>
    <td>Pseudo classpath</td>
    <td>
      Supported classpath entries:
      <ul>
        <li>
          .semanticdb files (prettyprinted directly)
        </li>
        <li>
          Directories (traversed recursively, all found .semanticdb files
          prettyprinted)
        </li>
        <li>
          .jar files (traversed recursively, all found .semanticdb files
          uncompressed and prettyprinted)
        </li>
      </ul>
    </td>
    <td></td>
  </tr>
  <tr>
    <td><code>--compact</code>,<br/><code>--detailed</code>,<br/><code>--proto</code></td>
    <td></td>
    <td>
      Specifies prettyprinting format, which can be either <code>--compact</code>
      (prints the most important parts of the payload in a condensed fashion),
      <code>--detailed</code> (more detailed than --compact, but still pretty
      condensed), or <code>--proto</code> (prints the same output as
      <code>protoc</code> would print, <a href="#protoc">see below</a>).
    </td>
    <td>
      <code>--compact</code>
    </td>
  </tr>
</table>
<p>For an example of using Metap, check out <a href="#example">Example</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="protoc"></a><a href="#protoc" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Protoc</h3>
<p>The Protocol Compiler tool (<code>protoc</code>) can inspect protobuf payloads in
<code>--decode</code> (takes a schema) and <code>--decode_raw</code> (doesn't need a schema) modes.
For the reference, here's <a href="https://github.com/scalameta/scalameta/blob/master/semanticdb/semanticdb/semanticdb.proto">the SemanticDB protobuf schema</a>.</p>
<pre><code class="hljs">$ tree
.
├── META-INF
│   └── semanticdb
│       └── Test<span class="hljs-selector-class">.scala</span><span class="hljs-selector-class">.semanticdb</span>
└── Test<span class="hljs-selector-class">.scala</span>

$ protoc --proto_path &lt;directory with the <span class="hljs-selector-class">.proto</span> file&gt;\
--decode scala<span class="hljs-selector-class">.meta</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.semanticdb</span><span class="hljs-selector-class">.TextDocuments</span>\
semanticdb<span class="hljs-selector-class">.proto</span> &lt; META-INF/semanticdb/Test<span class="hljs-selector-class">.scala</span><span class="hljs-selector-class">.semanticdb</span>

documents {
  schema: SEMANTICDB4
  uri: <span class="hljs-string">"Test.scala"</span>
  symbols {
    symbol: <span class="hljs-string">"_empty_/Test.main().(args)"</span>
    kind: PARAMETER
    name: <span class="hljs-string">"args"</span>
    access {
      publicAccess {
      }
    }
    language: SCALA
    signature {
      valueSignature {
        tpe {
          typeRef {
            symbol: <span class="hljs-string">"scala/Array#"</span>
            type_arguments {
              typeRef {
                symbol: <span class="hljs-string">"scala/Predef.String#"</span>
              }
            }
          }
        }
      }
    }
  }
  symbols {
    symbol: <span class="hljs-string">"_empty_/Test."</span>
    kind: OBJECT
    properties: <span class="hljs-number">8</span>
...
</code></pre>
<p><code>protoc</code> was useful for getting things done in the early days of SemanticDB,
but nowadays it's a bit too low-level. It is recommended to use <code>metap</code>
instead of <code>protoc</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="semanticdb-based-tools"></a><a href="#semanticdb-based-tools" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SemanticDB-based tools</h2>
<h3><a class="anchor" aria-hidden="true" id="scalafix"></a><a href="#scalafix" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scalafix</h3>
<p><a href="https://github.com/scalacenter/scalafix">Scalafix</a> is a rewrite and linting
tool for Scala developed at the Scala Center with the goal to help automate
migration between different Scala compiler and library versions.</p>
<p>Scalafix provides syntactic and semantic APIs that tool developers can use
to write custom rewrite and linting rules. Syntactic information is obtained from
<a href="https://github.com/scalameta/scalameta">the Scalameta parser</a>, and semantic
information is loaded from SemanticDB files produced by
<a href="#scalac-compiler-plugin">the Scalac compiler plugin</a> and <a href="#metacp">Metacp</a>.</p>
<p>Thanks to SemanticDB, Scalafix is:</p>
<ul>
<li><strong>Accessible</strong>: Scalafix enables novices to implement advanced rules without
learning compiler internals.</li>
<li><strong>Portable</strong>: Scalafix is not tied to compiler internals, which means that it
can seamlessly work with any compiler / compiler version that supports
<a href="#scalac-compiler-plugin">the SemanticDB compiler plugin</a>.</li>
<li><strong>Scalable</strong>: Scalafix does not need a running Scala compiler, so it can perform
rewrites and lints in parallel. (Unlike compiler plugin-based linters
that are limited by the single-threaded architecture of Scalac).</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="metadoc"></a><a href="#metadoc" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Metadoc</h3>
<p><a href="https://github.com/scalameta/metadoc">Metadoc</a> is an experiment with SemanticDB
to build online code browser with IDE-like features. Check out
<a href="http://scalameta.org/metadoc/">the demo</a> for more information.</p>
<p>Metadoc takes Scala sources and corresponding SemanticDB files generated by
<a href="#scalac-compiler-plugin">the Scalac compiler plugin</a>. It then generates a
static site that is possible to serve via GitHub pages, supporting jump to
definition, find usages and search by symbol.</p>
<p>Thanks to SemanticDB, Metadoc is:</p>
<ul>
<li><strong>Cross-platform</strong>: <a href="#scala-bindings">Scala bindings to SemanticDB</a> are
cross-compiled to JVM and Scala.js, which means that the site generator
and the online code browser can reuse the same logic to work with
SemanticDB payloads.</li>
<li><strong>Portable</strong>: Just like Scalafix, Metadoc is not tied to compiler internals,
which means that it can seamlessly work with any compiler / compiler version
that supports <a href="#scalac-compiler-plugin">the SemanticDB compiler plugin</a>.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="metals"></a><a href="#metals" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Metals</h3>
<p><a href="https://github.com/scalameta/metals">Metals</a> is an experiment to implement a
<a href="https://github.com/Microsoft/language-server-protocol">language server</a> for Scala
using <a href="https://github.com/scalameta">Scalameta</a> projects such as Scalafmt,
Scalafix and SemanticDB. Check out
<a href="https://geirsson.com/assets/metals/">the presentation</a> for more information.</p>
<p>Metals uses SemanticDB to:</p>
<ul>
<li>Index project dependencies for intelligent jump to definition
and quick lookups of project symbols.</li>
<li>Communicate with the Scala compiler regarding semantic information
about the opened project.</li>
<li>Feed semantic information into <a href="#scalafix">Scalafix</a>-based refactorings.</li>
</ul>
<p>Thanks to SemanticDB, Metals is:</p>
<ul>
<li><strong>Mostly portable</strong>: Unlike Scalafix and Metadoc, Metals has modules that
interface directly with compiler internals, but the majority its
functionality is based on SemanticDB, so it can work with any compiler /
compiler version that supports
<a href="#scalac-compiler-plugin">the SemanticDB compiler plugin</a>.</li>
<li><strong>Surprisingly fast</strong>: A well-defined schema for semantic information
that can come from multiple locations (dependency classpath, uncompiled
files, compiled files, etc) allows for a robust implementation of indexing,
which reliably speeds up operations like jump to definition and find usages.
We have even experimented with <a href="https://github.com/scalameta/metals/pull/94">a relational index for SemanticDB data</a>,
which further improves performance characteristics.</li>
<li><strong>Resilient</strong>: Reification of semantic information makes it possible to
consult results of previous typechecks and accommodate certain edits by simply
shifting offsets in old SemanticDB snapshots. This technique is surprisingly
effective for supporting minor edits that result in temporarily invalid code.</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/trees/astexplorer.html"><span class="arrow-prev">← </span><span>Previous</span></a><a class="docs-next button" href="/docs/semanticdb/specification.html"><span>Next</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav docOnPageNav"><ul class="toc-headings"><li><a href="#installation">Installation</a></li><li><a href="#example">Example</a></li><li><a href="#what-is-semanticdb-good-for">What is SemanticDB good for?</a></li><li><a href="#producing-semanticdb">Producing SemanticDB</a><ul class="toc-headings"><li><a href="#scalac-compiler-plugin">Scalac compiler plugin</a></li><li><a href="#metac">Metac</a></li><li><a href="#sbt">sbt</a></li><li><a href="#javac-compiler-plugin">Javac compiler plugin</a></li><li><a href="#metacp">Metacp</a></li></ul></li><li><a href="#consuming-semanticdb">Consuming SemanticDB</a><ul class="toc-headings"><li><a href="#scala-bindings">Scala bindings</a></li><li><a href="#metap">Metap</a></li><li><a href="#protoc">Protoc</a></li></ul></li><li><a href="#semanticdb-based-tools">SemanticDB-based tools</a><ul class="toc-headings"><li><a href="#scalafix">Scalafix</a></li><li><a href="#metadoc">Metadoc</a></li><li><a href="#metals">Metals</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer" style="background-color:#181A1F"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/scalameta.png" alt="Scalameta" width="66" height="58"/></a><div><h5>Docs</h5><a href=" /docs/trees/guide.html">Trees Guide</a><a href=" /docs/trees/quasiquotes.html">Quasiquotes</a><a href=" /docs/semanticdb/specification.html">SemanticDB</a></div><div><h5>Community</h5><a href="https://gitter.im/scalameta/scalameta" target="_blank">Chat on Gitter</a></div><div><h5>More</h5><a href="https://github.com/scalameta/scalameta" target="_blank">GitHub</a></div></section><section class="copyright">Copyright © 2018 Scalameta</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: '0460d1c693a278bc1ad07ada3fb96c63',
                indexName: 'scalameta',
                inputSelector: '#search_input_react'
              });
            </script></body></html>